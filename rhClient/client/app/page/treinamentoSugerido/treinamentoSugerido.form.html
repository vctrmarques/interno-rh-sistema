<div class="page" ng-controller="treinamentoSugeridoFormCtrl">
	<div class="row ui-section">
		<div class="col-lg-8 clearfix">
			<h2 class="section-header">{{!detalhes ? 'Formulário de Treinamento Sugerido' : 'Detalhes da Treinamento Sugerido'}}</h2>
		</div>
		<div class="col-md-12">
			<div class="panel panel-default">
				<div class="panel-body">
					<div class="row">
						<div class="col-lg-12">
							<div layout="column" ng-cloak class="md-inline-form inputdemoBasicUsage">
								<form ng-disabled="detalhes" name="treinamentoSugeridoForm">
									<div layout-padding>
										<md-tabs md-dynamic-height md-border-bottom> 
										<!-- Início da aba TREINAMENTO SUGERIDO --> 
										<md-tab label="Treinamento Sugerido"> <md-content class="md-padding">
										<div class="divider divider"></div>
										<div class="panel panel-default">
											<div class="panel-body">
												<div class="row">
													<div class="col-md-12">
														<h4>Curso</h4>
													</div>
													<div layout layout-sm="column" class="col-md-9">
														<md-autocomplete ng-disabled="detalhes" flex ng-required="true" md-no-cache="noCache" md-floating-label="Descrição do Curso" md-selected-item="curso" md-search-text="searchCurso"
															md-items="curso in querySearchCurso(searchCurso)" md-item-text="curso.nomeCurso" md-delay="100" md-min-length="3" md-selected-item-change="cursoSelecionado()"> <md-item-template>
														<span md-highlight-text="search" md-highlight-flags="^i"> {{curso.nomeCurso}}</span> </md-item-template> <md-not-found> Item "{{search}}" não encontrado. </md-not-found> </md-autocomplete>
														<div ng-messages="curso.nomeCurso.$error">
															<div ng-message="required">Campo de preenchimento obrigatório.</div>
														</div>
													</div>
													<div layout layout-sm="column" class="col-md-3">
														<md-input-container flex> <label>CH</label> <input ng-disabled="detalhes" autocomplete="off" ng-required="true" ng-model="ch" name="ch">
														<div ng-messages="treinamentoSugeridoForm.ch.$error" multiple>
															<div ng-message="required">Campo de preenchimento obrigatório.</div>
														</div>
														</md-input-container>
													</div>
													<div layout layout-sm="column" class="col-md-9">
														<md-input-container flex> <label>Instrutor</label> <input ng-disabled="detalhes" autocomplete="off" ng-required="true" ng-model="treinamentoSugerido.instrutor"
															name="instrutor">
														<div ng-messages="treinamentoSugeridoForm.instrutor.$error" multiple>
															<div ng-message="required">Campo de preenchimento obrigatório.</div>
														</div>
														</md-input-container>
													</div>
													<div layout layout-sm="column" class="col-md-3">
														<md-input-container class="md-block" flex> <label>Tipo</label> <md-select ng-disabled="detalhes" required ng-model="treinamentoSugerido.tipo" name="tipo">
														<md-option ng-repeat="tipo in list.tipos" value="{{tipo.label}}"> {{tipo.label}} </md-option> </md-select>
														<div ng-messages="treinamentoSugeridoForm.tipo.$error" multiple>
															<div ng-message="required">Campo de preenchimento obrigatório.</div>
														</div>
														</md-input-container>
													</div>
													<div layout layout-sm="column" class="col-md-6">
														<md-input-container flex> <label>Local</label> <input ng-disabled="detalhes" autocomplete="off" ng-required="true" ng-model="treinamentoSugerido.local" name="local">
														<div ng-messages="treinamentoSugeridoForm.local.$error" multiple>
															<div ng-message="required">Campo de preenchimento obrigatório.</div>
														</div>
														</md-input-container>
													</div>
													<div layout layout-sm="column" class="col-md-3">
														<md-input-container class="md-block" flex> <label>Data Início</label> <md-icon class="material-icons icon-momentpicker" ng-class="md-datepicker-calendar-icon"
															aria-label="md-calendar">date_range</md-icon> <input name="dataInicio" required moment-picker="treinamentoSugerido.dataInicio" placeholder="Selecione a data"
															ng-model="treinamentoSugerido.dataInicio" format="DD/MM/YYYY" locale="pt-br" start-view="month" ng-disabled="detalhes">
														<div ng-messages="treinamentoSugeridoForm.dataInicio.$error" multiple>
															<div ng-message="required">Campo de preenchimento obrigatório.</div>
														</div>
														</md-input-container>
													</div>
													<div layout layout-sm="column" class="col-md-3">
														<md-input-container class="md-block" flex> <label>Data Término</label> <md-icon class="material-icons icon-momentpicker" ng-class="md-datepicker-calendar-icon"
															aria-label="md-calendar">date_range</md-icon> <input name="dataFinal" required moment-picker="treinamentoSugerido.dataFinal" placeholder="Selecione a data"
															ng-model="treinamentoSugerido.dataFinal" format="DD/MM/YYYY" locale="pt-br" start-view="month" ng-disabled="detalhes">
														<div ng-messages="treinamentoSugeridoForm.dataFinal.$error" multiple>
															<div ng-message="required">Campo de preenchimento obrigatório.</div>
														</div>
														</md-input-container>
													</div>
													<div layout class="col-lg-12" layout-sm="colum">
														<md-input-container flex> <label>Motivo</label> <textarea ng-disabled="detalhes" ng-required="true" ng-model="treinamentoSugerido.motivo" columns="2" name="motivo"></textarea>
														<div ng-messages="treinamentoSugeridoForm.motivo.$error" multiple>
															<div ng-message="required">Campo de preenchimento obrigatório.</div>
														</div>
														</md-input-container>
													</div>
												</div>
											</div>
										</div>

										<div class="panel panel-default">
											<div class="panel-body">
												<div class="row">
													<div class="col-md-12">
														<h4>Funcionário</h4>
													</div>
													<div layout layout-sm="column" class="col-md-12">
														<md-autocomplete ng-disabled="detalhes" flex md-no-cache="noCache" md-floating-label="Funcionário" md-selected-item="funcionario" md-search-text="searchFuncionario"
															md-items="funcionario in querySearchFuncionario(searchFuncionario)" md-item-text="funcionario.nome" md-delay="100" md-min-length="3" md-selected-item-change="adicionarFuncionario()">
														<md-item-template> <span md-highlight-text="search" md-highlight-flags="^i"> {{funcionario.nome}}</span> </md-item-template> <md-not-found> Item "{{search}}" não
														encontrado. </md-not-found> </md-autocomplete>
														<div ng-messages="funcionario.nome.$error">
															<div ng-message="required">Campo de preenchimento obrigatório.</div>
														</div>
													</div>

													<div class="col-lg-12">
														<md-table-container>
														<table md-table ng-model="selected" md-progress="promise">
															<thead md-head md-order="query.order" md-on-reorder="loadList">
																<tr md-row>
																	<th md-column><span>Matrícula</span></th>
																	<th md-column><span>Funcionário</span></th>
																	<th md-column><span>Filial</span></th>
																	<th md-column><span>Lotação</span></th>
																	<th md-column><span>Açoes</span></th>
																</tr>
															</thead>
															<tbody md-body>
																<tr md-row md-select="item" md-select-id="item" md-auto-select ng-repeat="item in funcionariosTreinamento">
																	<td md-cell>{{item.matricula}}</td>
																	<td md-cell>{{item.nome}}</td>
																	<td md-cell>{{item.filial.nomeFilial}}</td>
																	<td md-cell>{{item.lotacao.descricao}}</td>
																	<td md-cell>
																		<a ng-click="exibirFuncionario(item)">
						                                                    <md-tooltip md-direction="top">Visualizar Funcionario</md-tooltip>
						                                                    <i class="fa fa-search-plus fa-lg"></i>
						                                                </a>
						                                                <a ng-click="removerFuncionario(item)">
						                                                    <md-tooltip md-direction="top">Remover</md-tooltip>
						                                                    <i class="fa fa-trash fa-lg"></i>
						                                                </a>
																	</td>
																</tr>
															</tbody>
														</table>
														</md-table-container>
													</div>
												</div>
											</div>
										</div>

										</md-content></md-tab> <!-- Fim da aba TREINAMENTO SUGERIDO --> 
										
										<!-- Início da aba COMPLEMENTO --> 
										<md-tab label="Complemento" ng-disabled="!validaAbaComplemento()"> <md-content class="md-padding">
										<div class="divider divider"></div>
											<div class="panel panel-default">
												<div class="panel-heading">Curso</div>
												<div class="panel-body">
													<div layout layout-sm="column" class="col-md-4">
														<md-input-container flex> <label>Situação</label> <md-select id="SelectSituacao" ng-required="habilitar" ng-disabled="detalhes" name="situacao"
													ng-model="treinamentoSugerido.situacao"> <md-option ng-repeat="s in list.situacoes" value="{{s.label}}"> {{s.label}} </md-option> </md-select> </md-input-container>
													</div>
													<div layout layout-sm="column" class="col-md-8">
														<md-input-container flex> <label>Descrição</label> <input ng-disabled="true" autocomplete="off" ng-required="true" ng-model="curso.nomeCurso" name="curso">
														</md-input-container>
													</div>
													
													<div layout layout-sm="column" class="col-md-4">
														<md-input-container flex> <label>Turma</label> <input ng-disabled="detalhes" autocomplete="off" ng-required="true" ng-pattern="/^[0-9]*$/" ng-model="treinamentoSugerido.turma" name="turma">
														<div ng-messages="treinamentoSugeridoForm.turma.$error" multiple>
															<div ng-message="required">Campo de preenchimento obrigatório.</div>
															<div ng-message="pattern">Este campo só permite números</div>
														</div>
														</md-input-container>
													</div>
													
												</div></div>
												<div class="row">
													<div class="col-md-6">
														<div class="panel panel-default">
															<div class="panel-heading">Complemento</div>
															<div class="panel-body">
																<div layout layout-sm="column" class="col-md-6">
																	<md-input-container class="md-block" flex> <label>Data Início</label> <md-icon class="material-icons icon-momentpicker" ng-class="md-datepicker-calendar-icon"
																		aria-label="md-calendar">date_range</md-icon> <input name="dataInicio" required moment-picker="treinamentoSugerido.dataInicio" placeholder="Selecione a data"
																		ng-model="treinamentoSugerido.dataInicio" format="DD/MM/YYYY" locale="pt-br" start-view="month" ng-disabled="detalhes">
																	<div ng-messages="treinamentoSugeridoForm.dataInicio.$error" multiple>
																		<div ng-message="required">Campo de preenchimento obrigatório.</div>
																	</div>
																	</md-input-container>
																</div>
																<div layout layout-sm="column" class="col-md-6">
																	<md-input-container class="md-block" flex> <label>Data Término</label> <md-icon class="material-icons icon-momentpicker" ng-class="md-datepicker-calendar-icon"
																		aria-label="md-calendar">date_range</md-icon> <input name="dataFinal" required moment-picker="treinamentoSugerido.dataFinal" placeholder="Selecione a data"
																		ng-model="treinamentoSugerido.dataFinal" format="DD/MM/YYYY" locale="pt-br" start-view="month" ng-disabled="detalhes">
																	<div ng-messages="treinamentoSugeridoForm.dataFinal.$error" multiple>
																		<div ng-message="required">Campo de preenchimento obrigatório.</div>
																	</div>
																	</md-input-container>
																</div>
																<div layout layout-sm="column" class="col-md-12">
																	<md-input-container flex> <label>Local</label> <input ng-disabled="detalhes" autocomplete="off" ng-required="true" ng-model="treinamentoSugeridoComplemento.local" name="localComplemento">
																	<div ng-messages="treinamentoSugeridoForm.localComplemento.$error" multiple>
																		<div ng-message="required">Campo de preenchimento obrigatório.</div>
																	</div>
																	</md-input-container>
																</div>
																<div layout layout-sm="column" class="col-md-12">
																	<md-input-container flex> <label>Endereço</label> <input ng-disabled="detalhes" autocomplete="off" ng-required="true" ng-model="treinamentoSugeridoComplemento.endereco" name="endereco">
																	<div ng-messages="treinamentoSugeridoForm.endereco.$error" multiple>
																		<div ng-message="required">Campo de preenchimento obrigatório.</div>
																	</div>
																	</md-input-container>
																</div>
																
																<div layout layout-sm="column" class="col-md-6">
																	<md-input-container flex> <label>Bairro</label> <input ng-disabled="detalhes" autocomplete="off" ng-required="true" ng-model="treinamentoSugeridoComplemento.bairro" name="bairro">
																	<div ng-messages="treinamentoSugeridoForm.bairro.$error" multiple>
																		<div ng-message="required">Campo de preenchimento obrigatório.</div>
																	</div>
																	</md-input-container>
																</div>
																
																<div layout layout-sm="column" class="col-md-6">
																	<md-input-container flex> <label>Complemento</label> <input ng-disabled="detalhes" autocomplete="off" ng-required="true" ng-model="treinamentoSugeridoComplemento.complemento" name="complemento">
																	<div ng-messages="treinamentoSugeridoForm.complemento.$error" multiple>
																		<div ng-message="required">Campo de preenchimento obrigatório.</div>
																	</div>
																	</md-input-container>
																</div>
																
																<div layout layout-sm="column" class="col-md-6">
																	<md-input-container class="md-block">
			                                                            <label>UF</label>
			                                                            <md-select ng-disabled="detalhes" name="unidadeFederativa"
			                                                                ng-model="unidadeFederativa" ng-change="getMunicipios(unidadeFederativa.id)">
			                                                                <md-option ng-value=null><em>-- Selecione --</em></md-option>
			                                                                <md-option ng-repeat="uf in list.uf" value="{{uf.id}}">
			                                                                    {{uf.sigla}} - {{uf.estado}}
			                                                                </md-option>
			                                                            </md-select>
			                                                        </md-input-container>
																</div>
																<div layout layout-sm="column" class="col-md-6">
			                                                        <md-input-container class="md-block">
			                                                            <label>Município</label>
			                                                            <md-select ng-disabled="unidadeFederativa.id" name="municipio"
			                                                                ng-model="treinamentoSugeridoComplemento.municipio">
			                                                                <md-option ng-value=null><em>-- Selecione --</em></md-option>
			                                                                <md-option ng-repeat="municipio in list.municipio"
			                                                                    ng-value="municipio.id">
			                                                                    {{municipio.descricao}}
			                                                                </md-option>
			                                                            </md-select>
			                                                        </md-input-container>
		                                                        </div>
																
																
															</div>
														</div>
													</div>
													
													<div class="col-md-6">
														<div class="panel panel-default">
															<div class="panel-heading">Dados do treinamento</div>
															<div class="panel-body">
																<div layout layout-sm="column" class="col-md-12">
																	<md-input-container flex> <label>Período</label> <input ng-disabled="true" autocomplete="off" ng-model="getPeriodo()">
																	</md-input-container>
																</div>
																<div layout layout-sm="column" class="col-md-12">
																	<md-input-container flex>
						                                                <label>Horário</label>
						                                                <input type="time" name="horarioFlexivelInicio" autocomplete="off" ng-model="treinamentoSugerido.horario"
						                                                    ng-disabled="detalhes" />
						                                            </md-input-container>
					                                            </div>
					                                            <div layout layout-sm="column" class="col-md-12">
																	<md-input-container flex> <label>Quantidade de vagas</label> <input ng-disabled="detalhes" autocomplete="off" ng-model="treinamentoSugerido.quantidadeVagas">
																	</md-input-container>
																</div>
															</div>
														</div>
													</div>
												</div>
												
												<div class="row">
													<div class="col-md-6">
														<div class="panel panel-default">
															<div class="panel-heading">Valores</div>
															<div class="panel-body">
																<div layout layout-sm="column" class="col-md-12">
																	<md-input-container flex> <label>Docência</label> <input ng-disabled="detalhes" autocomplete="off" ng-required="true" ng-model="treinamentoSugeridoValores.valorDocencia" name="docencia" ui-number-mask="2">
																	<div ng-messages="treinamentoSugeridoForm.docencia.$error" multiple>
																		<div ng-message="required">Campo de preenchimento obrigatório.</div>
																	</div>
																	</md-input-container>
																</div>
																
																<div layout layout-sm="column" class="col-md-12">
																	<md-input-container flex> <label>Condução</label> <input ng-disabled="detalhes" autocomplete="off" ng-required="true" ng-model="treinamentoSugeridoValores.valorConducao" name="conducao" ui-number-mask="2">
																	<div ng-messages="treinamentoSugeridoForm.conducao.$error" multiple>
																		<div ng-message="required">Campo de preenchimento obrigatório.</div>
																	</div>
																	</md-input-container>
																</div>
																
																<div layout layout-sm="column" class="col-md-12">
																	<md-input-container flex> <label>Diárias</label> <input ng-disabled="detalhes" autocomplete="off" ng-required="true" ng-model="treinamentoSugeridoValores.valorDiarias" name="diarias" ui-number-mask="2">
																	<div ng-messages="treinamentoSugeridoForm.docencia.$error" multiple>
																		<div ng-message="required">Campo de preenchimento obrigatório.</div>
																	</div>
																	</md-input-container>
																</div>
																
																<div layout layout-sm="column" class="col-md-12">
																	<md-input-container flex> <label>Material</label> <input ng-disabled="detalhes" autocomplete="off" ng-required="true" ng-model="treinamentoSugeridoValores.valorMaterial" name="material" ui-number-mask="2">
																	<div ng-messages="treinamentoSugeridoForm.material.$error" multiple>
																		<div ng-message="required">Campo de preenchimento obrigatório.</div>
																	</div>
																	</md-input-container>
																</div>
																
																<div layout layout-sm="column" class="col-md-12">
																	<md-input-container flex> <label>Hospedagem</label> <input ng-disabled="detalhes" autocomplete="off" ng-required="true" ng-model="treinamentoSugeridoValores.valorHospedagem" name="hospedagem" ui-number-mask="2">
																	<div ng-messages="treinamentoSugeridoForm.hospedagem.$error" multiple>
																		<div ng-message="required">Campo de preenchimento obrigatório.</div>
																	</div>
																	</md-input-container>
																</div>
																
																<div layout layout-sm="column" class="col-md-12">
																	<md-input-container flex> <label>Individual</label> <input ng-disabled="detalhes" autocomplete="off" ng-required="true" ng-model="treinamentoSugeridoValores.valorIndividual" name="individual" ui-number-mask="2">
																	<div ng-messages="treinamentoSugeridoForm.individual.$error" multiple>
																		<div ng-message="required">Campo de preenchimento obrigatório.</div>
																	</div>
																	</md-input-container>
																</div>
															</div>
														</div>
													</div>
													
													<div class="col-md-6">
														<div class="panel panel-default">
															<div class="panel-body">
																<div layout layout-sm="column" class="col-md-12">
																	<md-input-container flex> <label>Justificativa</label> <input ng-disabled="detalhes" autocomplete="off" ng-required="true" ng-model="treinamentoSugerido.justificativa" name="justificativa">
																	<div ng-messages="treinamentoSugeridoForm.justificativa.$error" multiple>
																		<div ng-message="required">Campo de preenchimento obrigatório.</div>
																	</div>
																	</md-input-container>
																</div>
																
																<div layout layout-sm="column" class="col-md-12">
																	<md-input-container flex> <label>Resultado</label> <input ng-disabled="detalhes" autocomplete="off" ng-required="true" ng-model="treinamentoSugerido.resultado" name="resultado">
																	<div ng-messages="treinamentoSugeridoForm.resultado.$error" multiple>
																		<div ng-message="required">Campo de preenchimento obrigatório.</div>
																	</div>
																	</md-input-container>
																</div>
															</div>
														</div>
													</div>
												</div>
										</md-content></md-tab> <!-- Fim da aba COMPLEMENTO --> </md-tabs>


										<div ng-if="detalhes" layout layout-sm="column">
											<table md-table md-progress="promise">
												<thead md-head>
													<tr md-row>
														<th md-column><span>Criado em:</span></th>
														<th md-column><span>Atualizado em:</span></th>
														<th md-column><span>Criado por:</span></th>
														<th md-column><span>Atualizado por:</span></th>
													</tr>
												</thead>
												<tbody md-body>
													<tr md-row>
														<td md-cell>{{treinamentoSugerido.criadoEm | date:'dd/MM/yy - HH:mm'}}</td>
														<td md-cell>{{treinamentoSugerido.alteradoEm | date:'dd/MM/yy - HH:mm'}}</td>
														<td md-cell>{{treinamentoSugerido.criadoPor}}</td>
														<td md-cell>{{treinamentoSugerido.alteradoPor}}</td>

													</tr>
												</tbody>
											</table>
										</div>
										<br>
										<div class="row">
											<div class="col-md-12 text-center">
												<button ng-if="!detalhes" ng-click="save()" ui-wave class="btn btn-primary btn-w-md">Salvar</button>
												<p class="btn btn-default btn-w-md" ui-wave data-ng-click="goBack()">Voltar</p>
												<button ng-disabled="!validaBotaoCertificado()" ng-click="showAta()" ui-wave class="btn btn-primary btn-w-md">Imprimir Ata</button>
												<button ng-disabled="!validaBotaoCertificado()" ng-click="showCertificado()" ui-wave class="btn btn-primary btn-w-md">Imprimir Certificado</button>
											</div>
										</div>

									</div>
								</form>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
