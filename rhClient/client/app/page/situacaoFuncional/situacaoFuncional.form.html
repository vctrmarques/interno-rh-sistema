<div class="page" ng-controller="situacaoFuncionalFormCtrl">
    <div class="row ui-section">
        <div class="col-md-8 clearfix">
            <h2 class="section-header">
                {{!detalhes ? 'Formulário Situação Funcional' : 'Detalhes do Situação Funcional'}}</h2>
        </div>
        <div class="col-md-12">
            <div class="panel panel-default">
                <div class="panel-body">
                    <div class="row">
                        <div class="col-md-12">
                            <div layout="column" ng-cloak class="md-inline-form inputdemoBasicUsage">
                                <div layout-padding>
                                    <form ng-disabled="detalhes" name="situacaoFuncionalForm" ng-submit="save()">
                                        <div class="row">
                                            <div layout layout-sm="column" class="col-md-2">
                                                <md-input-container class="md-block" flex>
                                                    <label>Código</label>
                                                    <input required ng-disabled="detalhes"
                                                        ng-model="situacaoFuncional.codigo" name="codigo">
                                                    <div ng-messages="situacaoFuncionalForm.codigo.$error" role="alert"
                                                        multiple ng-if='situacaoFuncionalForm.codigo.$dirty'>
                                                        <div ng-message="required">Campo de preenchimento obrigatório.
                                                        </div>
                                                    </div>
                                                </md-input-container>
                                            </div>
                                            <div layout layout-sm="column" class="col-md-10">
                                                <md-input-container flex>
                                                    <label>Descrição situação funcional</label>
                                                    <input required ng-disabled="detalhes"
                                                        ng-model="situacaoFuncional.descricao" name="descricao">
                                                    <div ng-messages="situacaoFuncionalForm.descricao.$error"
                                                        role="alert" multiple
                                                        ng-if='situacaoFuncionalForm.descricao.$dirty'>
                                                        <div ng-message="required">Campo de preenchimento obrigatório.
                                                        </div>
                                                    </div>
                                                </md-input-container>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div layout class="col-md-4" layout-sm="colum">
                                                <md-input-container class="md-block" flex>
                                                    <label>Rais Situação</label>
                                                    <input ng-disabled="detalhes"
                                                        ng-model="situacaoFuncional.raisSituacao" name="raisSituacao"
                                                        ui-number-mask="0">
                                                </md-input-container>
                                            </div>
                                            <div layout class="col-md-4" layout-sm="colum">
                                                <md-input-container class="md-block" flex>
                                                    <label>Rais</label>
                                                    <input ng-disabled="detalhes" ng-model="situacaoFuncional.rais"
                                                        name="rais" ui-number-mask="0">
                                                </md-input-container>
                                            </div>

                                            <div layout class="col-md-4" layout-sm="colum">
                                                <md-input-container flex>
                                                    <label>Tipo</label>
                                                    <md-select ng-disabled="detalhes" ng-model="situacaoFuncional.tipo"
                                                        name="tipo">
                                                        <md-option ng-value=null><em>-- Selecione --</em></md-option>
                                                        <md-option ng-click="tipoSelecionado(tipo.nome)"
                                                            ng-repeat="tipo in tipos" ng-value="tipo.nome">
                                                            {{tipo.nome}}
                                                        </md-option>
                                                    </md-select>
                                                </md-input-container>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div layout class="col-md-12" layout-sm="column">
                                                <md-input-container flex>
                                                    <md-switch ng-disabled="detalhes" name="entraFolha"
                                                        ng-model="situacaoFuncional.entraFolha"
                                                        aria-label="Entra pra Folha">
                                                        Entra pra Folha
                                                    </md-switch>
                                                </md-input-container>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div layout class="col-md-6" layout-sm="colum">
                                                <md-input-container flex>
                                                    <label>Modalidade</label>
                                                    <md-select ng-disabled="detalhes"
                                                        ng-model="situacaoFuncional.modalidade" name="modalidade">
                                                        <md-option ng-value=null><em>-- Selecione --</em></md-option>
                                                        <md-option ng-repeat="modalidade in modalidades"
                                                            ng-value="modalidade.nome">
                                                            {{modalidade.nome}}
                                                        </md-option>
                                                    </md-select>
                                                </md-input-container>
                                            </div>
                                            <div layout class="col-md-6" layout-sm="colum">
                                                <md-input-container class="md-block" flex>
                                                    <label>Qtd Dias</label>
                                                    <input
                                                        ng-disabled="detalhes || situacaoFuncional.modalidade != 'Com Estabilidade'"
                                                        ng-model="situacaoFuncional.qtdDias" name="qtdDias"
                                                        ui-number-mask="0">
                                                </md-input-container>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div layout class="col-md-12" layout-sm="colum">
                                                <md-input-container flex>
                                                    <label>Causa Afastamento para Rescisão</label>
                                                    <md-select
                                                        ng-disabled="detalhes || situacaoFuncional.modalidade != 'Rescisão'"
                                                        name="causaAfastamento"
                                                        ng-model="situacaoFuncional.causaAfastamentoId">
                                                        <md-option ng-value=null><em>-- Selecione --</em></md-option>
                                                        <md-option
                                                            ng-repeat="causaMotivoAfastamento in listCausaAfastamento.data"
                                                            ng-value="causaMotivoAfastamento.id">
                                                            {{causaMotivoAfastamento.descricao}}
                                                        </md-option>
                                                    </md-select>
                                                </md-input-container>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div layout class="col-md-12" layout-sm="colum">
                                                <h4>eSocial</h4>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div layout class="col-md-6" layout-sm="colum">
                                                <md-input-container flex>
                                                    <label>Motivo de Afastamento</label>
                                                    <md-select
                                                        ng-disabled="detalhes || situacaoFuncional.tipo != 'Afastamento'"
                                                        name="motivoAfastamento"
                                                        ng-model="situacaoFuncional.motivoAfastamentoId">
                                                        <md-option ng-value=null><em>-- Selecione --</em></md-option>
                                                        <md-option
                                                            ng-repeat="motivoAfastamento in listMotivoAfastamento.data"
                                                            ng-value="motivoAfastamento.id">
                                                            {{motivoAfastamento.descricao}}
                                                        </md-option>
                                                    </md-select>
                                                </md-input-container>
                                            </div>
                                            <div layout class="col-md-6" layout-sm="colum">
                                                <md-input-container flex>
                                                    <label>Motivo de Desligamento</label>
                                                    <md-select
                                                        ng-disabled="detalhes || situacaoFuncional.tipo != 'Desligamento'"
                                                        name="motivoDesligamento"
                                                        ng-model="situacaoFuncional.motivoDesligamentoId">
                                                        <md-option ng-value=null><em>-- Selecione --</em></md-option>
                                                        <md-option
                                                            ng-repeat="motivoDesligamento in listMotivoDesligamento.data"
                                                            ng-value="motivoDesligamento.id">
                                                            {{motivoDesligamento.descricao}}
                                                        </md-option>
                                                    </md-select>
                                                </md-input-container>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-12" ng-if="detalhes" layout layout-sm="column">
                                                <table md-table md-progress="promise">
                                                    <thead md-head>
                                                        <tr md-row>
                                                            <th md-column>
                                                                <span>Criado em:</span>
                                                            </th>
                                                            <th md-column>
                                                                <span>Atualizado em:</span>
                                                            </th>
                                                            <th md-column>
                                                                <span>Criado por:</span>
                                                            </th>
                                                            <th md-column>
                                                                <span>Atualizado por:</span>
                                                            </th>
                                                        </tr>
                                                    </thead>
                                                    <tbody md-body>
                                                        <tr md-row>
                                                            <td md-cell>{{situacaoFuncional.criadoEm | date:'dd/MM/yy -
                                                                HH:mm'}}</td>
                                                            <td md-cell>{{situacaoFuncional.alteradoEm | date:'dd/MM/yy -
                                                                HH:mm'}}</td>
                                                            <td md-cell>{{situacaoFuncional.criadoPor}}</td>
                                                            <td md-cell>{{situacaoFuncional.alteradoPor}}</td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-12 text-center">
                                                <button ng-if="!detalhes" ng-disabled="situacaoFuncionalForm.$invalid"
                                                    type="submit" ui-wave
                                                    class="btn btn-primary btn-w-md">Salvar</button>
                                                <p class="btn btn-default btn-w-md" ui-wave data-ng-click="goBack()">
                                                    Voltar</p>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>